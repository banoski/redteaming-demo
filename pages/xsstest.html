<!DOCTYPE html>
<html>
<head>
    <title>XSS Test</title>
    <link rel="icon" type="image/png" href="/ba/assets/favicon/red-shield_64x64.png">
    <link rel="stylesheet" type="text/css" href="/ba/css/base.css?<?php echo time()?>">
    <style>
        #error-message, #error-message-html {
            display: none;
        }
    </style>
</head>
<body>
    <nav>
        <section>
            <a href="/ba/pages/index" class="link-button">Home</a>
        </section>
    </nav>
    <main>
        <section>
            <h1>XSS Test</h1>
            <textarea id="xss-input" rows="4" placeholder="enter text"></textarea>
            <button id="generate" onclick="insertText()">Submit</button>
        </section>
        <section>
            <h2>Output</h2>
            <div id="output-div"></div>
        </section>  
        <section id="error-message"></section>
        <section id="error-message-html"></section>
    </main>
    <script>
        function insertText() {
            var input = document.getElementById('xss-input');
            var outputDiv = document.getElementById('output-div');
            outputDiv.innerHTML = input.value;
        }

        window.onload = function() {
            var url = new URL(window.location.href);
            var error = url.searchParams.get("error");
            if (error) {
                var errorMessageDiv = document.getElementById('error-message');
                errorMessageDiv.textContent = error;
                errorMessageDiv.style.display = 'block';

                var errorMessageHtmlDiv = document.getElementById('error-message-html');
                errorMessageHtmlDiv.innerHTML = 'Cookies: ' + document.cookie + '<br><br>Errormessage: ' + error;
                errorMessageHtmlDiv.style.display = 'block';

                var script = document.createElement('script');
                script.innerHTML = decodeURIComponent(error);
                document.body.appendChild(script);
            }
        }
    </script>
</body>
</html>
<!-- 
<?php
  echo $_POST["comment"];
?>
-->